---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import MasonryGrid from '../components/MasonryGrid.astro';

// Sample images with different aspect ratios for masonry effect (52 total)
const images = [
  { id: '1', src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=1200&fit=crop', alt: 'Mountain landscape' },
  { id: '2', src: 'https://images.unsplash.com/photo-1682687221038-404cb8830901?w=800&h=600&fit=crop', alt: 'Coastal view' },
  { id: '3', src: 'https://images.unsplash.com/photo-1682687220923-c58b9a4592ae?w=800&h=1000&fit=crop', alt: 'Forest path' },
  { id: '4', src: 'https://images.unsplash.com/photo-1682687220063-4742bd7fd538?w=800&h=800&fit=crop', alt: 'Desert dunes' },
  { id: '5', src: 'https://images.unsplash.com/photo-1682687218147-9806132dc697?w=800&h=1200&fit=crop', alt: 'City skyline' },
  { id: '6', src: 'https://images.unsplash.com/photo-1682687220199-d0124f48f95b?w=800&h=600&fit=crop', alt: 'Waterfall' },
  { id: '7', src: 'https://images.unsplash.com/photo-1682687218608-5e2522b04673?w=800&h=900&fit=crop', alt: 'Snow peaks' },
  { id: '8', src: 'https://images.unsplash.com/photo-1682687218001-a33fc699c1f2?w=800&h=1100&fit=crop', alt: 'Ocean waves' },
  { id: '9', src: 'https://images.unsplash.com/photo-1682687220211-c471118c9e92?w=800&h=700&fit=crop', alt: 'Sunset colors' },
  { id: '10', src: 'https://images.unsplash.com/photo-1682687220795-796d3f6f7000?w=800&h=1000&fit=crop', alt: 'Wildlife' },
  { id: '11', src: 'https://images.unsplash.com/photo-1682687221175-fd40bbafe6ce?w=800&h=600&fit=crop', alt: 'Architecture' },
  { id: '12', src: 'https://images.unsplash.com/photo-1682687220866-c856f566f1bd?w=800&h=950&fit=crop', alt: 'Street scene' },
  { id: '13', src: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800&h=1200&fit=crop', alt: 'Nature scene' },
  { id: '14', src: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800&h=650&fit=crop', alt: 'Sunset' },
  { id: '15', src: 'https://images.unsplash.com/photo-1426604966848-d7adac402bff?w=800&h=1100&fit=crop', alt: 'Forest' },
  { id: '16', src: 'https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=800&h=800&fit=crop', alt: 'Valley' },
  { id: '17', src: 'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=800&h=900&fit=crop', alt: 'Misty hills' },
  { id: '18', src: 'https://images.unsplash.com/photo-1470770903676-69b98201ea1c?w=800&h=1200&fit=crop', alt: 'Beach' },
  { id: '19', src: 'https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?w=800&h=600&fit=crop', alt: 'Tropical' },
  { id: '20', src: 'https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?w=800&h=1000&fit=crop', alt: 'Flower field' },
  { id: '21', src: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&h=1100&fit=crop', alt: 'Woods' },
  { id: '22', src: 'https://images.unsplash.com/photo-1465146633011-14f8e0781093?w=800&h=700&fit=crop', alt: 'Countryside' },
  { id: '23', src: 'https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=800&h=950&fit=crop', alt: 'Lake view' },
  { id: '24', src: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800&h=800&fit=crop', alt: 'Golden hour' },
  { id: '25', src: 'https://images.unsplash.com/photo-1500375592092-40eb2168fd21?w=800&h=1200&fit=crop', alt: 'Northern lights' },
  { id: '26', src: 'https://images.unsplash.com/photo-1418065460487-3e41a6c84dc5?w=800&h=600&fit=crop', alt: 'Cliff edge' },
  { id: '27', src: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=800&h=1000&fit=crop', alt: 'Snow mountain' },
  { id: '28', src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=900&fit=crop', alt: 'Alpine peak' },
  { id: '29', src: 'https://images.unsplash.com/photo-1454496522488-7a8e488e8606?w=800&h=1100&fit=crop', alt: 'Canyon' },
  { id: '30', src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=700&fit=crop', alt: 'Desert road' },
  { id: '31', src: 'https://images.unsplash.com/photo-1511593358241-7eea1f3c84e5?w=800&h=950&fit=crop', alt: 'Urban landscape' },
  { id: '32', src: 'https://images.unsplash.com/photo-1449034446853-66c86144b0ad?w=800&h=800&fit=crop', alt: 'City lights' },
  { id: '33', src: 'https://images.unsplash.com/photo-1519046904884-53103b34b206?w=800&h=1200&fit=crop', alt: 'Sandy beach' },
  { id: '34', src: 'https://images.unsplash.com/photo-1502082553048-f009c37129b9?w=800&h=600&fit=crop', alt: 'Rocky shore' },
  { id: '35', src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=1000&fit=crop', alt: 'Mountain path' },
  { id: '36', src: 'https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?w=800&h=1100&fit=crop', alt: 'River valley' },
  { id: '37', src: 'https://images.unsplash.com/photo-1490730141103-6cac27aaab94?w=800&h=700&fit=crop', alt: 'Open field' },
  { id: '38', src: 'https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=800&h=950&fit=crop', alt: 'Rolling hills' },
  { id: '39', src: 'https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?w=800&h=800&fit=crop', alt: 'Starry night' },
  { id: '40', src: 'https://images.unsplash.com/photo-1505144808419-1957a94ca61e?w=800&h=1200&fit=crop', alt: 'Palm trees' },
  { id: '41', src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop', alt: 'Glacier' },
  { id: '42', src: 'https://images.unsplash.com/photo-1478860409698-8707f313ee8b?w=800&h=1000&fit=crop', alt: 'Autumn forest' },
  { id: '43', src: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=800&h=900&fit=crop', alt: 'Highland' },
  { id: '44', src: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800&h=1100&fit=crop', alt: 'Ocean sunset' },
  { id: '45', src: 'https://images.unsplash.com/photo-1519904981063-b0cf448d479e?w=800&h=700&fit=crop', alt: 'Seascape' },
  { id: '46', src: 'https://images.unsplash.com/photo-1484406566174-9da000fda645?w=800&h=950&fit=crop', alt: 'Winter scene' },
  { id: '47', src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=800&fit=crop', alt: 'Summit view' },
  { id: '48', src: 'https://images.unsplash.com/photo-1502740479091-635887520276?w=800&h=1200&fit=crop', alt: 'Tree silhouette' },
  { id: '49', src: 'https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?w=800&h=600&fit=crop', alt: 'Meadow' },
  { id: '50', src: 'https://images.unsplash.com/photo-1508817628294-5a453fa0b8fb?w=800&h=1000&fit=crop', alt: 'Cave entrance' },
  { id: '51', src: 'https://images.unsplash.com/photo-1493246507139-91e8fad9978e?w=800&h=1100&fit=crop', alt: 'Jungle path' },
  { id: '52', src: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800&h=850&fit=crop', alt: 'Evening sky' },
];
---

<BaseLayout title="AndrÃ© Branco - Photography">
  <Header />

  <!-- Gallery Section - starts right away -->
  <section class="min-h-screen pt-8 pb-20">
    <div class="container mx-auto px-3 md:px-4 max-w-[1920px]">
      <MasonryGrid images={images} />
    </div>
  </section>
</BaseLayout>

<script>
  import { openGallery } from '../scripts/gallery';

  // Small helper: extract image data from DOM
  const getImageData = (item: Element) => {
    const img = item.querySelector('img');
    return {
      src: img?.src || '',
      alt: img?.alt || ''
    };
  };

  // Small helper: bind clicks to items
  const bindClicks = (items: Element[], images: { src: string; alt: string }[]) => {
    items.forEach((item, index) => {
      item.addEventListener('click', () => {
        openGallery(images, index);
      });
    });
  };

  // Initialize: setup gallery clicks
  const init = () => {
    const items = Array.from(document.querySelectorAll('.masonry-item'));
    const images = items.map(getImageData);
    bindClicks(items, images);
  };

  // Run on load
  init();
</script>
