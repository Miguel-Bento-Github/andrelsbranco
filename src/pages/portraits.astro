---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import MasonryGrid from '../components/MasonryGrid.astro';

// Sample portrait images - replace with your actual photos
const images = [
  { id: '1', src: 'https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=800&q=80', alt: 'Portrait 1', width: 800, height: 1000 },
  { id: '2', src: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=800&q=80', alt: 'Portrait 2', width: 800, height: 1000 },
  { id: '3', src: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=800&q=80', alt: 'Portrait 3', width: 800, height: 1000 },
  { id: '4', src: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=800&q=80', alt: 'Portrait 4', width: 800, height: 1000 },
  { id: '5', src: 'https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=800&q=80', alt: 'Portrait 5', width: 800, height: 1000 },
  { id: '6', src: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&q=80', alt: 'Portrait 6', width: 800, height: 1000 },
  { id: '7', src: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=800&q=80', alt: 'Portrait 7', width: 800, height: 1000 },
  { id: '8', src: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=800&q=80', alt: 'Portrait 8', width: 800, height: 1000 },
  { id: '9', src: 'https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=800&q=80', alt: 'Portrait 9', width: 800, height: 1000 },
  { id: '10', src: 'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=800&q=80', alt: 'Portrait 10', width: 800, height: 1000 },
  { id: '11', src: 'https://images.unsplash.com/photo-1522529599102-193c0d76b5b6?w=800&q=80', alt: 'Portrait 11', width: 800, height: 1000 },
  { id: '12', src: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=800&q=80', alt: 'Portrait 12', width: 800, height: 1000 },
];
---

<BaseLayout title="Portraits - André Branco" description="Portrait photography by André Branco">
  <Header />

  <section class="min-h-screen pt-8 pb-20">
    <div class="container mx-auto px-3 md:px-4 max-w-[1920px]">
      <h1 class="text-4xl md:text-5xl font-light  text-center mb-8 tracking-wide">
        Portraits
      </h1>
      <p class="text-center  mb-16 max-w-2xl mx-auto">
        Capturing the essence and character of people through thoughtful composition and lighting.
      </p>
      <MasonryGrid images={images} />
    </div>
  </section>
</BaseLayout>

<script>
  import { openGallery } from '../scripts/gallery';

  const getImageData = (item: Element) => {
    const img = item.querySelector('img');
    return {
      src: img?.src || '',
      alt: img?.alt || ''
    };
  };

  const bindClicks = (items: Element[], images: { src: string; alt: string }[]) => {
    items.forEach((item, index) => {
      item.addEventListener('click', () => {
        openGallery(images, index);
      });
    });
  };

  const init = () => {
    const items = Array.from(document.querySelectorAll('.masonry-item'));
    const images = items.map(getImageData);
    bindClicks(items, images);

    // Check for photo parameter in URL
    const urlParams = new URLSearchParams(window.location.search);
    const photoParam = urlParams.get('photo');
    if (photoParam) {
      const photoIndex = parseInt(photoParam, 10) - 1;
      if (photoIndex >= 0 && photoIndex < images.length) {
        openGallery(images, photoIndex);
      }
    }
  };

  init();
</script>
